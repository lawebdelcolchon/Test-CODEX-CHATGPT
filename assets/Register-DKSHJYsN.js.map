{"version":3,"file":"Register-DKSHJYsN.js","sources":["../../src/features/user/Register.jsx","../../src/pages/Register.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport LandingIntro from './LandingIntro';\r\nimport ErrorText from '../../components/Typography/ErrorText';\r\nimport InputText from '../../components/Input/InputText';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { registerUser } from './userSlice';\r\nimport { saveAuthToken } from '../../app/authUtils';\r\n\r\nfunction Register() {\r\n    const INITIAL_REGISTER_OBJ = {\r\n        first_name: '',\r\n        last_name: '',\r\n        email: '',\r\n        password: '',\r\n        id_number: '',\r\n    };\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const [registerObj, setRegisterObj] = useState(INITIAL_REGISTER_OBJ);\r\n\r\n    const dispatch = useDispatch();\r\n    const { error } = useSelector((state) => state.user);\r\n\r\n    const submitForm = (e) => {\r\n        e.preventDefault();\r\n        setErrorMessage('');\r\n\r\n        if (registerObj.first_name.trim() === '') return setErrorMessage('El nombre es requerido!');\r\n        if (registerObj.last_name.trim() === '') return setErrorMessage('El apellido es requerido!');\r\n        if (registerObj.email.trim() === '') return setErrorMessage('El email es requerido!');\r\n        if (registerObj.password.trim() === '') return setErrorMessage('La contraseña es requerida!');\r\n        if (registerObj.id_number.trim() === '') return setErrorMessage('La cédula es requerida!');\r\n\r\n        setLoading(true);\r\n        dispatch(registerUser(registerObj)).then((response) => {\r\n            if (response.error) {\r\n                setErrorMessage(response.error.message);\r\n                setLoading(false);\r\n            } else {\r\n                const token = response.payload.token;\r\n                saveAuthToken(token);\r\n                setLoading(false);\r\n                window.location.href = '/login';\r\n            }\r\n        });\r\n    };\r\n\r\n    const updateFormValue = ({ updateType, value }) => {\r\n        setErrorMessage('');\r\n        setRegisterObj({ ...registerObj, [updateType]: value });\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-base-200 flex items-center\">\r\n            <div className=\"card mx-auto w-full max-w-5xl shadow-xl\">\r\n                <div className=\"grid md:grid-cols-2 grid-cols-1 bg-base-100 rounded-xl\">\r\n                    <div className=\"\">\r\n                        <LandingIntro />\r\n                    </div>\r\n                    <div className=\"py-20 px-10\">\r\n                        <h2 className=\"text-2xl font-semibold mb-2 text-center\">Registro</h2>\r\n                        <form onSubmit={submitForm}>\r\n                            <div className=\"mb-4\">\r\n                                <InputText\r\n                                    defaultValue={registerObj.first_name}\r\n                                    updateType=\"first_name\"\r\n                                    containerStyle=\"mt-2\"\r\n                                    labelTitle=\"Nombres\"\r\n                                    updateFormValue={updateFormValue}\r\n                                />\r\n                                <InputText\r\n                                    defaultValue={registerObj.last_name}\r\n                                    updateType=\"last_name\"\r\n                                    containerStyle=\"mt-2\"\r\n                                    labelTitle=\"Apellidos\"\r\n                                    updateFormValue={updateFormValue}\r\n                                />\r\n                                <InputText\r\n                                    defaultValue={registerObj.email}\r\n                                    updateType=\"email\"\r\n                                    containerStyle=\"mt-2\"\r\n                                    labelTitle=\"Email\"\r\n                                    updateFormValue={updateFormValue}\r\n                                />\r\n                                <InputText\r\n                                    defaultValue={registerObj.password}\r\n                                    type=\"password\"\r\n                                    updateType=\"password\"\r\n                                    containerStyle=\"mt-2\"\r\n                                    labelTitle=\"Password\"\r\n                                    updateFormValue={updateFormValue}\r\n                                />\r\n                                <InputText\r\n                                    defaultValue={registerObj.id_number}\r\n                                    updateType=\"id_number\"\r\n                                    containerStyle=\"mt-2\"\r\n                                    labelTitle=\"Número Identificación\"\r\n                                    updateFormValue={updateFormValue}\r\n                                />\r\n                            </div>\r\n                            <ErrorText styleClass=\"mt-8\">{errorMessage || error}</ErrorText>\r\n                            <button type=\"submit\" className={`btn mt-2 w-full btn-primary${loading ? ' loading' : ''}`}>\r\n                                Registro\r\n                            </button>\r\n                            <div className=\"text-center mt-2\">\r\n                                Ya tiene una cuenta?{' '}\r\n                                <Link to=\"/login\">\r\n                                    <span className=\"inline-block hover:text-primary hover:underline hover:cursor-pointer transition duration-200\">\r\n                                        Acceder\r\n                                    </span>\r\n                                </Link>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n","import {useState, useRef} from 'react'\nimport {Link} from 'react-router-dom'\nimport Register from '../features/user/Register'\n\nfunction ExternalPage(){\n\n\n    return(\n        <div className=\"\">\n                <Register />\n        </div>\n    )\n}\n\nexport default ExternalPage"],"names":["Register","INITIAL_REGISTER_OBJ","loading","setLoading","useState","errorMessage","setErrorMessage","registerObj","setRegisterObj","dispatch","useDispatch","error","useSelector","state","submitForm","e","registerUser","response","token","saveAuthToken","updateFormValue","updateType","value","jsx","jsxs","LandingIntro","InputText","ErrorText","Link","ExternalPage"],"mappings":"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"}