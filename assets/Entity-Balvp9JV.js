import{r as l,j as e,u as ze,b as Ve,F as Ie,y as Oe,R as Me,z as ae,A as re,B as Pe,C as We}from"./index-CUbjpvjr.js";import{T as He}from"./TitleCard-D06na8dt.js";import{j as Be,k as Ye,l as Ze,m as Qe,n as Ge}from"./Layout-CKc2l2A5.js";import{I as Ke}from"./ErrorText-B8y8r1KA.js";function Xe({title:r,titleId:a,...o},c){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":a},o),r?l.createElement("title",{id:a},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Je=l.forwardRef(Xe);function qe({title:r,titleId:a,...o},c){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":a},o),r?l.createElement("title",{id:a},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const Ue=l.forwardRef(qe);function et({title:r,titleId:a,...o},c){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":a},o),r?l.createElement("title",{id:a},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const tt=l.forwardRef(et);function st({title:r,titleId:a,...o},c){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":a},o),r?l.createElement("title",{id:a},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const nt=l.forwardRef(st);function lt(r){const{labelTitle:a,labelDescription:o,defaultValue:c,containerStyle:m="",placeholder:b,labelStyle:y="",options:x,updateType:j,updateFormValue:f,border:k,size:V,labelPosition:w="top"}=r,[g,K]=l.useState(c||""),E=d=>{f({updateType:j,value:d}),K(d)};return e.jsxs("div",{className:`inline-block ${m}`,style:{display:"flex",flexDirection:w==="left"?"row":"column",alignItems:w==="left"?"center":"flex-start"},children:[e.jsx("label",{className:`label ${y} ${w==="left"?"w-1/4":"w-full"}`,style:{marginRight:w==="left"?"1rem":"0"},children:e.jsxs("div",{className:"label-text",children:[a,o&&e.jsx("div",{className:"tooltip tooltip-right","data-tip":o,children:e.jsx(tt,{className:"w-4 h-4"})})]})}),e.jsxs("select",{className:`select select-${k||"bordered"} select-${V||"md"} ${w==="left"?"w-3/4":"w-full"}`,value:g,onChange:d=>E(d.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:b}),x.map((d,I)=>e.jsx("option",{value:d.value||d.name,children:d.name},I))]})]})}function at({labelTitle:r,labelStyle:a="",containerStyle:o="",defaultValue:c,placeholder:m,updateFormValue:b,updateType:y,border:x,size:j,labelPosition:f="top"}){const[k,V]=l.useState(c),w=g=>{V(g),b({updateType:y,value:g})};return e.jsxs("div",{className:`form-control ${o}`,style:{display:"flex",flexDirection:f==="left"?"row":"column",alignItems:f==="left"?"center":"flex-start"},children:[e.jsx("label",{className:`label ${a} ${f==="left"?"w-1/4":"w-full"} textarea-${j}`,style:{marginRight:f==="left"?"1rem":"0"},children:e.jsx("span",{className:"label-text text-base-content",children:r})}),e.jsx("textarea",{value:k,className:`textarea textarea-${x||"bordered"} ${f==="left"?"w-3/4":"w-full"} input-${j||"md"}`,placeholder:m||"",onChange:g=>w(g.target.value)})]})}function rt({labelTitle:r,labelStyle:a="",containerStyle:o="",defaultValue:c,updateFormValue:m,updateType:b,size:y="md",labelPosition:x="top"}){const[j,f]=l.useState(c),k=()=>{f(!j),m({updateType:b,value:!j})};return e.jsxs("div",{className:`form-control ${o}`,style:{display:"flex",flexDirection:x==="left"?"row":"column",alignItems:x==="left"?"center":"flex-start"},children:[e.jsx("label",{className:`label cursor-pointer ${a} ${x==="left"?"w-1/4":"w-full"}`,style:{marginRight:x==="left"?"1rem":"0"},children:e.jsx("span",{className:"label-text text-base-content",children:r})}),e.jsx("input",{type:"checkbox",className:`toggle ${x==="left"?"":"w-full"} toggle-${y}`,checked:j,onChange:k})]})}function ot({type:r="horizontal",text:a="",containerStyle:o=""}){return r==="horizontal"?e.jsx("div",{className:`flex w-full flex-col ${o}`,children:e.jsx("div",{className:"divider my-1",children:a})}):e.jsx("div",{className:`flex w-full ${o}`,children:e.jsx("div",{className:"divider divider-horizontal my-1",children:a})})}function it({data:r,columns:a}){return!r||!a||a.length===0?e.jsx("p",{children:"No hay datos para mostrar."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{children:e.jsx("tr",{children:a.map((o,c)=>e.jsx("th",{className:"text-left",children:o.headerName},c))})}),e.jsx("tbody",{children:r.map((o,c)=>e.jsx("tr",{children:a.map((m,b)=>e.jsx("td",{children:typeof m.render=="function"?m.render(o[m.field],o):o[m.field]},b))},c))})]})})}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ce=(...r)=>r.filter((a,o,c)=>!!a&&a.trim()!==""&&c.indexOf(a)===o).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=l.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:m="",children:b,iconNode:y,...x},j)=>l.createElement("svg",{ref:j,...dt,width:a,height:a,stroke:r,strokeWidth:c?Number(o)*24/Number(a):o,className:ce("lucide",m),...x},[...y.map(([f,k])=>l.createElement(f,k)),...Array.isArray(b)?b:[b]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(r,a)=>{const o=l.forwardRef(({className:c,...m},b)=>l.createElement(ut,{ref:b,iconNode:a,className:ce(`lucide-${ct(r)}`,c),...m}));return o.displayName=`${r}`,o};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function xt({entityName:r,entityTitles:a,entityMinTitles:o,fields:c,fieldsMin:m,interval:b=50,sort:y,sortOrder:x="desc",panels:j=[],icons:f,mergedColumns:k=null,mergedColumnsMin:V=null,query:w=null,widthMain:g,widthPanel:K}){const E=ze(),d=Ve(t=>w&&w.length>0?t.api.executeSQLResult:t.api.entities),{search:I}=l.useContext(Ie),[X,ue]=l.useState(null),[$,D]=l.useState(1),[J,he]=l.useState(1),[q,me]=l.useState(1),[be,pe]=l.useState(0),[xe,je]=l.useState(0),[M,fe]=l.useState(b),[_,we]=l.useState(!1),{empresa:P,setEmpresa:ge}=Oe(),[R,ve]=l.useState(""),[U,Ne]=l.useState(y),[W,ye]=l.useState(x),A=l.useRef({page:null,limit:null,dbName:null}),te=t=>{const n=t==="lawebdelcolchon.es"?"lawebes":t==="ergonatur.es"?"ergonatur":"lawebes";ve(n),z(1,50,n,!0,y,x)},H=t=>{ge(t),D(1),te(t)},Ce=t=>{const n=new Date(t);return isNaN(n)?t:Ze(n).format("DD/MM/YYYY HH:mm")},ke=t=>t.startsWith("fecha_")||t.startsWith("date_"),Ee=t=>d.items.filter(n=>n.name.toLowerCase().includes(t.toLowerCase())),se=t=>{ue(t)},$e=()=>D(1),Re=()=>D(J),Se=()=>$>1&&D($-1),Te=()=>$<J&&D($+1),O=t=>{fe(t),D(1),z(1,t)},z=(t=1,n=M,s,u=!1,h=null,i=null)=>{if(!(!u&&A.current.page===t&&A.current.limit===n&&A.current.dbName===s&&A.current.sort===h&&A.current.sortOrder===i))if(A.current={page:t,limit:n,dbName:s,sort:h,sortOrder:i},w&&w.length>0){const{dbName:v,fields:N,pivotTable:C,joinTable:p,joinCondition:S,joinType:T,whereCondition:Q,orderBy:G}=w[0];E(n==="Todos"?ae({fields:N,pivotTable:C,joinTable:p,joinCondition:S,joinType:T,whereCondition:Q,orderBy:h?`${h} ${i}`:G,dbName:s}):ae({fields:N,pivotTable:C,joinTable:p,joinCondition:S,joinType:T,whereCondition:Q,orderBy:h?`${h} ${i}`:G,page:t,limit:n,dbName:s}))}else E(n==="Todos"?re({entityName:r,fields:c,sort:h,sortOrder:i,dbName:s}):re({entityName:r,page:t,fields:c,sort:h,sortOrder:i,limit:n,dbName:s}))};l.useEffect(()=>{d&&d.items&&d.items.length>0&&X===null&&se(0)},[X,d]),l.useEffect(()=>{P&&te(P)},[P]),l.useEffect(()=>{R!==""&&z($,M,R)},[$,M,R]),l.useEffect(()=>{d&&(he(d.totalPages),me(d.firstRecordIndex),pe(d.lastRecordIndex),je(d.totalRecords))},[d]),l.useEffect(()=>{I&&Ee(I)},[I]),l.useEffect(()=>{const t=()=>we(window.innerWidth<=768);return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const ne=_?o:a,Le=_?m:c,B=_?V:k,ee=(t,n)=>{let s;const u=ke(n.trim());return n.trim()==="enabled"||n.trim().startsWith("status")?s=t===1?e.jsx(Qe,{className:"w-4 h-4 font-bold text-green-500"}):e.jsx(Ge,{className:"w-4 h-4 font-bold text-red-500"}):u&&!isNaN(Date.parse(t))?s=Ce(t):t==null||typeof t=="number"&&isNaN(t)?s="":typeof t=="number"?Number.isInteger(t)?s=t:s=t.toFixed(3):s=t,s};let L="",F="";g=="1/2"?(L="overflow-x-auto w-full md:w-1/2",F="h-full pl-0 hidden md:block w-1/2"):g=="3/4"?(L="overflow-x-auto w-full md:w-3/4",F="h-full pl-0 hidden md:block w-1/4"):g=="1/4"?(L="overflow-x-auto w-full md:w-1/4",F="h-full pl-0 hidden md:block w-3/4"):g=="3/5"?(L="overflow-x-auto w-full md:w-3/5",F="h-full pl-0 hidden md:block w-2/5"):g=="2/2"?(L="overflow-x-auto w-full md:w-2/2",F="h-full pl-0 hidden md:block w-0"):(L="overflow-x-auto w-full md:w-1/2",F="h-full pl-0 hidden md:block w-1/2");const Fe=async(t,n,s)=>{const{action:u,field:h,updateValue:i}=t;if(u==="update"&&h){const v=i(s);E(Pe({entityName:r,id:n,updatedEntity:{[h]:v},dbName:R})).unwrap().then(()=>z(1,50,R,!0))}u==="delete"&&E(We({entityName:r,id:n,dbName:R})).unwrap().then(()=>z(1,50,R,!0))},[Y,De]=l.useState(()=>{const t={};return j.forEach(n=>{n.fields.forEach(s=>{t[s.name]=s.value||null})}),t}),Z=(t,n)=>{De(s=>({...s,[t]:n}))},_e=t=>{if(!(t.visible_on||t.not_visible_on))return!0;if(t.visible_on)return Y[t.visible_on];if(t.not_visible_on)return!Y[t.not_visible_on]},Ae=t=>{if(!(t.enable_on||t.not_enable_on))return!0;if(t.enable_on)return Y[t.enable_on];if(t.not_enable_on)return!Y[t.not_enable_on]},le=t=>{console.log(ne[t]);let n="";t===U?W===""?n="asc":W==="asc"?n="desc":n="asc":n="asc";const u=c.split(",")[t].trim();console.log(u),Ne(t),ye(n),z(1,50,R,!0,u,n)};return d?e.jsx(He,{topMargin:"mt-2",children:e.jsxs("div",{className:"h-full w-full bg-base-100 flex",children:[e.jsx("div",{className:L,style:{maxHeight:"82vh"},children:e.jsxs("table",{className:"table table-xs table-pin-rows table-pin-cols w-full h-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgb(229, 231, 235)"},children:[e.jsx("th",{children:"#"}),B?B.map((t,n)=>e.jsx("th",{id:n,children:e.jsxs("button",{onClick:()=>le(n),className:"btn btn-xs btn-ghost",children:[e.jsx("span",{children:t.title}),n===U&&(W==="asc"?e.jsx(oe,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"}))]})},n)):ne.map((t,n)=>e.jsx("th",{id:n,children:e.jsxs("button",{onClick:()=>le(n),className:"btn btn-xs btn-ghost",children:[e.jsx("span",{children:t}),n===U&&(W==="asc"?e.jsx(oe,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"}))]})},n)),e.jsx("th",{style:{width:"88px",fontSize:"12px"},children:"Acciones"})]})}),e.jsx("tbody",{children:Array.isArray(d==null?void 0:d.items)&&q!==void 0&&d.items.map((t,n)=>{const s=q+n;return e.jsxs("tr",{id:`${t.id}`,className:`${X===n?"bg-gray-300 hover:bg-gray-300":"hover:bg-gray-200"} hover:bg-gray-200`,onClick:()=>se(n),children:[e.jsx("td",{children:s}),B?B.map((u,h)=>{const{fields:i}=u;let v;if(i.length>1)v=e.jsx("div",{children:i.map((C,p)=>{const S=t[C.trim()],T=ee(S,C);return p===0?e.jsxs("div",{className:"font-bold",children:[e.jsx("span",{className:"text-blue-500",children:t.id})," ",T]},p):p===1?e.jsx("div",{className:"text-xs opacity-70",children:T},p):p===2?e.jsx("span",{className:"badge badge-ghost badge-sm",children:T},p):null})});else{const C=i[0].trim(),p=t[C];v=ee(p,C)}let N="left";return typeof v=="number"?N="right":(i[0].trim()==="enabled"||i[0].trim().startsWith("status"))&&(N="center"),e.jsx("td",{style:{textAlign:N},children:v},h)}):Le.split(",").map((u,h)=>{const i=t[u.trim()],v=ee(i,u.trim());let N="left";return typeof v=="number"?N="right":(u.trim()==="enabled"||u.trim().startsWith("status"))&&(N="center"),e.jsx("td",{style:{textAlign:N},children:v},h)}),e.jsx("td",{children:f.map((u,h)=>{const{icon:i,message:v,switch_icon:N,switch_message:C,field:p}=u,S=p&&t[p]===0,T=S?N:i,Q=S?C:v,G=S?"text-red-500":"text-black";return e.jsx("button",{className:"btn btn-square btn-ghost btn-xs",title:Q,onClick:()=>Fe(u,t.id,t[p]),children:e.jsx(T,{className:`w-4 h-4 ${G}`})},h)})})]},n)})}),e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("th",{colSpan:"9",children:e.jsxs("div",{className:"join",children:[e.jsxs("button",{className:"join-item btn btn-xs btn-ghost",children:[e.jsx(Be,{className:"w-4"}),_?"":"Buscar"]}),e.jsxs("div",{className:"dropdown dropdown-top join-item",children:[e.jsxs("button",{className:"join-item btn btn-xs btn-ghost",children:[q," - ",be," de ",xe]}),e.jsxs("ul",{className:"dropdown-content menu bg-base-100 rounded-box w-40 p-2 shadow",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>$e(),children:"Primera página"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>Re(),children:"Última página"})})]})]}),e.jsx("button",{className:"join-item btn btn-xs btn-ghost",onClick:Se,disabled:$<=1,children:e.jsx(Je,{className:"w-4"})}),e.jsx("button",{className:"join-item btn btn-xs btn-ghost",onClick:Te,disabled:$>=J,children:e.jsx(Ue,{className:"w-4"})}),e.jsxs("div",{className:"dropdown dropdown-top join-item",children:[e.jsxs("button",{className:"join-item btn btn-xs btn-ghost",children:["Límite: ",M]}),e.jsxs("ul",{className:"dropdown-content menu bg-base-100 rounded-box w-40 p-2 shadow",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>O(50),children:"50"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>O(100),children:"100"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>O(200),children:"200"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>O(500),children:"500"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>O("Todos"),children:"Todos"})})]})]}),e.jsxs("button",{className:"join-item btn btn-xs btn-ghost",children:[e.jsx(nt,{className:"w-4"}),_?"":"Agregar"]}),e.jsxs("div",{className:"dropdown dropdown-top dropdown-end join-item",children:[e.jsxs("button",{className:"join-item btn btn-xs btn-ghost",children:[e.jsx(Ye,{className:"w-4"}),_?"":P]}),e.jsxs("ul",{className:"dropdown-content menu bg-base-100 rounded-box w-40 p-2 shadow",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>H("lawebdelcolchon.es"),children:"lawebdelcolchon.es"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>H("ergonatur.es"),children:"ergonatur.es"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>H("mueblescantero.es"),children:"mueblescantero.es"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>H("dibermodel.es"),children:"dibermodel.es"})})]})]})]})})})})]})}),K!==""?e.jsx("div",{className:F,style:{maxHeight:"82vh"},children:e.jsx("div",{role:"tablist",className:"tabs tabs-bordered",style:{marginTop:"3px"},children:j.map((t,n)=>e.jsxs(Me.Fragment,{children:[e.jsx("input",{type:"radio",name:"panels",role:"tab",className:"tab","aria-label":t.title,id:`tab-${n}`,defaultChecked:n===0,style:{fontSize:"12px"}}),e.jsx("div",{role:"tabpanel",className:"tab-content p-1 w-full h-full",style:{overflowY:"auto",height:"calc(82vh - 2rem)"},children:t.fields.length>0?t.fields.map((s,u)=>{if(!_e(s))return null;const h=Ae(s);return e.jsxs("div",{children:[s.type==="input"&&e.jsx(Ke,{inputType:s.inputType,labelTitle:s.placeholder,defaultValue:s.value,updateType:s.name,updateFormValue:i=>Z(s.name,i),labelPosition:s.position,size:s.size,border:s.border,disabled:!h}),s.type==="select"&&e.jsx(lt,{labelTitle:s.placeholder,placeholder:"Selecciona una opción",defaultValue:s.value,options:s.options,updateType:s.name,updateFormValue:i=>Z(i.updateType,i.value),labelPosition:s.position,size:s.size,border:s.border,disabled:!h}),s.type==="toggle"&&e.jsx(rt,{labelTitle:s.placeholder,defaultValue:s.value,updateType:s.name,updateFormValue:i=>Z(i.updateType,i.value),labelPosition:s.position,size:s.size}),s.type==="textinputarea"&&e.jsx(at,{labelTitle:s.placeholder,defaultValue:s.value,placeholder:s.placeholder,updateType:s.name,updateFormValue:i=>Z(i.updateType,i.value),labelPosition:s.position,size:s.size,border:s.border,disabled:!h}),s.type==="divider"&&e.jsx(ot,{type:s.dividerType,text:s.text,containerStyle:s.containerStyle}),s.type==="datatable"&&e.jsx(it,{})]},u)}):e.jsx("p",{children:"Contenido por definir"})})]},n))})}):""]})}):e.jsx(e.Fragment,{})}export{xt as E};
